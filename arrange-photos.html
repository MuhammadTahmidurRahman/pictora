<!-- arrange-photos.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arrange Photos</title>
    <link rel="stylesheet" href="arrange-photos.css">

</head>
<body>
    <div id="event-info">
        <h3 id="event-code"></h3>
        <h4 id="room-name"></h4>
    </div>
    
    <div id="photo-folders">
        <!-- Photo folders will be dynamically populated here -->
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "your-api-key",
            authDomain: "your-auth-domain",
            projectId: "your-project-id",
            storageBucket: "your-storage-bucket",
            messagingSenderId: "your-messaging-sender-id",
            appId: "your-app-id"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        // Fetch event info (event code, room name)
        const eventId = "your-event-id"; // You would get this dynamically
        db.collection("events").doc(eventId).get().then((doc) => {
            if (doc.exists) {
                const eventData = doc.data();
                document.getElementById("event-code").textContent = `Event Code: ${eventData.eventCode}`;
                document.getElementById("room-name").textContent = `Room Name: ${eventData.roomName}`;
            }
        });

        // Fetch photo folders for all guests (both Manus and normal guests)
        db.collection("events").doc(eventId).collection("guests").get().then((querySnapshot) => {
            querySnapshot.forEach((doc) => {
                const guestData = doc.data();
                const folderName = guestData.folderName;
                const photoFolderDiv = document.createElement("div");
                photoFolderDiv.innerHTML = `
                    <h5>Guest: ${guestData.name}</h5>
                    <p>Folder: ${folderName}</p>
                    <button onclick="viewPhotos('${folderName}')">View Photos</button>
                `;
                document.getElementById("photo-folders").appendChild(photoFolderDiv);
            });
        });

        // Function to redirect to the photo folder
        function viewPhotos(folderName) {
            window.location.href = `view-photos.html?folder=${folderName}`;
        }
    </script>
</body>
</html>
